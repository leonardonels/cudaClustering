#params from adaprive clustering 
/clustering_node:
  ros__parameters:
    input_topic: /lidar_points #/lidar_points #/patchworkpp/nonground
    segmented_topic: /segmented_points
    filtered_topic: /filtered_points
    cluster_topic: /clusters #/perception/newclusters
    frame_id: "hesai_lidar"

    #clustering
    minClusterSize : 1        # Minimum cluster size to filter out noise
    maxClusterSize : 500      # Maximum size for large objects
    voxelX: 0.5               # Down-sampling resolution in X (meters)
    voxelY: 0.5               # Down-sampling resolution in Y (meters)
    voxelZ: 0.5               # Down-sampling resolution in Z (meters) - must be < (upZ - downZ)
    countThreshold: 1         # Minimum points per voxel

    #filter for clusters
    clusterMaxX: 0.4
    clusterMaxY: 0.4
    clusterMaxZ: 0.4
    clusterMinX: -0.1
    clusterMinY: -0.1
    clusterMinZ: 0.1
    maxHeight: 0.4          #of the lowest point

    #spatial filters (applied before segmentation) - set to large values to disable
    downFilterLimitX: -25.0   # Minimum X (meters) - filters points too far left
    upFilterLimitX: 25.0      # Maximum X (meters) - filters points too far right
    downFilterLimitY: -25.0   # Minimum Y (meters) - filters points too far back
    upFilterLimitY: 25.0      # Maximum Y (meters) - filters points too far forward
    downFilterLimitZ: -2.0    # Minimum Z (meters) - filters points below ground
    upFilterLimitZ: 3.0       # Maximum Z (meters) - filters points above detection zone

    #segmentation
    distanceThreshold: 0.1
    maxIterations: 166
    probability: 0.95

    optimizeCoefficients: false
    autoOptimizeCoefficients: false
    maxFailedSegmentations: 10
    minSuccessfulSegmentations: 60

    #options
    filter: true           # Enable spatial filtering (X, Y, Z) before segmentation
    publishFilteredPc: true      # Enable to debug filtering
    
    segment: true
    publishSegmentedPc: true
    
    skipClustering: true
    

